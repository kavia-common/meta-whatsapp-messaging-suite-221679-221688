{"is_source_file": true, "format": "JavaScript", "description": "This file implements a lightweight HTTP client using fetch with features such as base URL management, credentials handling, JSON processing, error normalization, and event emission for authorization events. It provides methods for GET, POST, PUT, DELETE requests and manages internal listeners for auth-related events.", "external_files": ["../utils/env"], "external_methods": ["env as envObj", "isDev"], "published": ["onAuthEvent", "httpClient"], "classes": [], "methods": [{"name": "onAuthEvent(callback)", "description": "Subscribe to auth-related events like 'unauthorized'. Returns an unsubscribe function.", "scope": "", "scopeKind": ""}, {"name": "emit(event, payload)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeError(status, payload, fallbackMsg = '')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "request(path, options = {})", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["listeners.add", "listeners.delete", "listeners.forEach", "cb(event, payload)", "normalizeError", "fetch", "response.headers.get", "response.json", "response.text", "emit"], "search-terms": ["http fetch client", "Error normalization", "authorization event handling", "react app API client", "fetch wrapper"], "state": 2, "file_id": 37, "knowledge_revision": 182, "git_revision": "91b0d3495f7348f67bbb8714df7533839efa417d", "revision_history": [{"83": ""}, {"157": "b1908240bd77acaba7042964287d4b6eede121db"}, {"176": "3c7d783543669da7a49961070a5a0cbe011ed415"}, {"182": "91b0d3495f7348f67bbb8714df7533839efa417d"}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const API_BASE = (envObj?.API_BASE || '').toString().replace(\\/\\\\\\/+$\\/, '');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^      'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "request.fetchOptions.headers", "scopeKind": "class"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const LOG_LEVEL = (envObj?.LOG_LEVEL || 'debug').toLowerCase();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowDebug", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const allowDebug = ['debug', 'trace'].includes(LOG_LEVEL);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowInfo", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const allowInfo = allowDebug || ['info'].includes(LOG_LEVEL);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowWarn", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const allowWarn = allowInfo || ['warn'].includes(LOG_LEVEL);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    code: undefined,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.norm", "scopeKind": "class"}, {"_type": "tag", "name": "credentials", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    credentials: 'include',$/", "language": "JavaScript", "kind": "property", "scope": "request.fetchOptions", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    details: undefined,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.norm", "scopeKind": "class"}, {"_type": "tag", "name": "emit", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^function emit(event, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(event, payload)"}, {"_type": "tag", "name": "fetchOptions", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^  const fetchOptions = {$/", "language": "JavaScript", "kind": "class", "scope": "request", "scopeKind": "class"}, {"_type": "tag", "name": "finalBody", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    let finalBody = body;$/", "language": "JavaScript", "kind": "variable", "scope": "httpClient", "scopeKind": "class"}, {"_type": "tag", "name": "finalPath", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    let finalPath = path;$/", "language": "JavaScript", "kind": "variable", "scope": "httpClient", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    const headers = { ...(options.headers || {}) };$/", "language": "JavaScript", "kind": "constant", "scope": "httpClient", "scopeKind": "class"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    headers: {$/", "language": "JavaScript", "kind": "class", "scope": "request.fetchOptions", "scopeKind": "class"}, {"_type": "tag", "name": "httpClient", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const httpClient = {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isForm", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    const isForm = typeof FormData !== 'undefined' && body instanceof FormData;$/", "language": "JavaScript", "kind": "constant", "scope": "httpClient", "scopeKind": "class"}, {"_type": "tag", "name": "listeners", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^const listeners = new Set();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    message: '',$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.norm", "scopeKind": "class"}, {"_type": "tag", "name": "norm", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^  const norm = {$/", "language": "JavaScript", "kind": "class", "scope": "normalizeError", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeError", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^function normalizeError(status, payload, fallbackMsg = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(status, payload, fallbackMsg = '')"}, {"_type": "tag", "name": "onAuthEvent", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^export function onAuthEvent(callback) {$/", "language": "JavaScript", "kind": "function", "signature": "(callback)"}, {"_type": "tag", "name": "qs", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^      const qs = usp.toString();$/", "language": "JavaScript", "kind": "constant", "scope": "httpClient", "scopeKind": "class"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    raw: payload,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.norm", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^async function request(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^    status: typeof status === 'number' ? status : 0,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.norm", "scopeKind": "class"}, {"_type": "tag", "name": "usp", "path": "/home/kavia/workspace/code-generation/meta-whatsapp-messaging-suite-221679-221688/frontend_react/src/api/httpClient.js", "pattern": "/^      const usp = new URLSearchParams();$/", "language": "JavaScript", "kind": "constant", "scope": "httpClient", "scopeKind": "class"}], "hash": "b42112f062f87b87777ac328ee6d3d81", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/api/httpClient.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "request.fetchOptions.headers", "scopeKind": "class", "description": "unavailable"}, {"name": "code: undefined,", "scope": "normalizeError.norm", "scopeKind": "class", "description": "unavailable"}, {"name": "credentials: 'include',", "scope": "request.fetchOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "details: undefined,", "scope": "normalizeError.norm", "scopeKind": "class", "description": "unavailable"}, {"name": "let finalBody = body;", "scope": "httpClient", "scopeKind": "class", "description": "unavailable"}, {"name": "let finalPath = path;", "scope": "httpClient", "scopeKind": "class", "description": "unavailable"}, {"name": "message: '',", "scope": "normalizeError.norm", "scopeKind": "class", "description": "unavailable"}, {"name": "raw: payload,", "scope": "normalizeError.norm", "scopeKind": "class", "description": "unavailable"}, {"name": "status: typeof status === 'number' ? status : 0,", "scope": "normalizeError.norm", "scopeKind": "class", "description": "unavailable"}]}